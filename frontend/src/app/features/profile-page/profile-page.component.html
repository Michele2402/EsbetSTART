<app-navbar></app-navbar>

<div class="container">

  <app-profile-leftbar></app-profile-leftbar>

  <div class="profile-section">
    <h1>Profile</h1>

    @if ((loggedUser | async) != null) {
      <h2>Access Data</h2>

      <form [formGroup]="editProfileForm" (ngSubmit)="onSubmit()">
        <div class="data-container">
          <mat-card appearance="outlined">
            <mat-card-content>Name</mat-card-content>
            <mat-form-field appearance="outline" class="data-access">
              <input matInput formControlName="name">
              @if (editProfileForm.get('name')?.invalid && (editProfileForm.get('name')?.touched && editProfileForm.get('name')?.dirty)) {
              }
              @if (editProfileForm.get('name')?.errors?.['required']) {
                <mat-error>Name is required</mat-error>
              } @else if (editProfileForm.get('name')?.errors?.['maxlength']) {
                <mat-error>Please enter a name with a max of 30 characters</mat-error>
              }
            </mat-form-field>
          </mat-card>

          <mat-card appearance="outlined">
            <mat-card-content>Surname</mat-card-content>
            <mat-form-field appearance="outline" class="data-access">
              <input matInput formControlName="surname">
              @if (editProfileForm.get('surname')?.invalid && (editProfileForm.get('surname')?.touched && editProfileForm.get('surname')?.dirty)) {
              }
              @if (editProfileForm.get('surname')?.errors?.['required']) {
                <mat-error>Surname is required</mat-error>
              } @else if (editProfileForm.get('surname')?.errors?.['maxlength']) {
                <mat-error>Please enter a surname with a max of 30 characters</mat-error>
              }
            </mat-form-field>
          </mat-card>

          <mat-card appearance="outlined">
            <mat-card-content>Username</mat-card-content>
            <mat-form-field appearance="outline" class="data-access">
              <input matInput formControlName="username">
              @if (editProfileForm.get('username')?.invalid && (editProfileForm.get('username')?.touched && editProfileForm.get('username')?.dirty)) {
              }
              @if (editProfileForm.get('username')?.errors?.['required']) {
                <mat-error>Username is required</mat-error>
              } @else if (editProfileForm.get('username')?.errors?.['maxlength']) {
                <mat-error>Please enter a username with a max of 30 characters</mat-error>
              }
            </mat-form-field>
          </mat-card>
        </div>


        <div class="edit">
          <button mat-fab class="logout-button" type="submit">
            Edit
          </button>
        </div>

      </form>
    }

  </div>

</div>
